<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Openland - Bài Tập Tổng Hợp</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        /* Reset và Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2596be;
            --primary-dark: #1c7a9e;
            --primary-light: #e1f5fe;
            --secondary-color: #f8f9fa;
            --text-color: #333;
            --light-text: #666;
            --border-color: #ddd;
            --correct-color: #4caf50;
            --incorrect-color: #f44336;
            --warning-color: #ff9800;
            --white: #ffffff;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --radius: 8px;
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            color: var(--text-color);
            background-color: #f5f7fa;
            line-height: 1.6;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        h1, h2, h3, h4, h5 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 20px 0;
            box-shadow: 0 4px 12px rgba(37, 150, 190, 0.2);
        }

        header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo h1 {
            font-size: 28px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo .tagline {
            font-size: 14px;
            opacity: 0.9;
            margin-top: 5px;
        }

        .exam-info h2 {
            font-size: 22px;
            margin-bottom: 5px;
        }

        .exam-info p {
            font-size: 15px;
            opacity: 0.9;
        }

        /* Main Content */
        main {
            padding: 30px 0;
        }

        /* Two-column layout for reading exercise */
        .two-column-layout {
            display: flex;
            gap: 0;
            margin-bottom: 40px;
            min-height: 500px;
            position: relative;
        }

        .column-resizer {
            width: 10px;
            background: var(--border-color);
            cursor: col-resize;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 10;
            flex-shrink: 0;
        }

        .column-resizer:hover {
            background: var(--primary-color);
        }

        .column-resizer i {
            color: var(--light-text);
            font-size: 12px;
        }

        .reading-panel, .questions-panel {
            flex: 1;
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            min-width: 200px;
            position: relative;
        }

        .reading-panel {
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
        }

        .questions-panel {
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
        }

        .panel-header {
            background-color: var(--primary-color);
            color: white;
            padding: 18px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-header h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
        }

        /* Reading Content */
        .reading-content {
            padding: 25px;
            height: calc(100% - 60px);
            overflow-y: auto;
        }

        .reading-content h4 {
            color: var(--primary-dark);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-light);
        }

        .reading-content p {
            margin-bottom: 15px;
            text-align: justify;
        }

        /* Questions Container */
        .questions-container {
            padding: 25px;
            height: calc(100% - 60px);
            overflow-y: auto;
        }

        .question-block {
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 1px dashed var(--border-color);
        }

        .question-block:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .question-title {
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary-dark);
            font-size: 17px;
            display: flex;
            gap: 10px;
        }

        .q-text {
            margin-left: 5px;
        }

        .question-content {
            margin-bottom: 20px;
        }

        .underline {
            text-decoration: underline;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
            transition: var(--transition);
        }

        .option:hover {
            background-color: var(--primary-light);
        }

        .option.selected {
            background-color: var(--primary-light);
            border-color: var(--primary-color);
        }

        .option.correct {
            background-color: rgba(76, 175, 80, 0.1);
            border-color: var(--correct-color);
        }

        .option.incorrect {
            background-color: rgba(244, 67, 54, 0.1);
            border-color: var(--incorrect-color);
        }

        .option input[type="radio"],
        .option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary-color);
        }

        .option-label {
            font-weight: 600;
            min-width: 30px;
        }

        /* True/False Options */
        .true-false-options {
            display: flex;
            gap: 20px;
        }

        .true-false-option {
            flex: 1;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }

        .true-false-option:hover {
            border-color: var(--primary-color);
        }

        .true-false-option.selected {
            border-color: var(--primary-color);
            background-color: var(--primary-light);
        }

        .true-false-option.true.selected.correct {
            border-color: var(--correct-color);
            background-color: rgba(76, 175, 80, 0.1);
        }

        .true-false-option.false.selected.correct {
            border-color: var(--correct-color);
            background-color: rgba(76, 175, 80, 0.1);
        }

        .true-false-option.selected.incorrect {
            border-color: var(--incorrect-color);
            background-color: rgba(244, 67, 54, 0.1);
        }

        .true-false-option.true {
            color: #2e7d32;
        }

        .true-false-option.false {
            color: #c62828;
        }

        /* Matching Exercise */
        .matching-exercise {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .matching-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            background-color: var(--secondary-color);
        }

        .matching-item .item-label {
            font-weight: 600;
            min-width: 30px;
            color: var(--primary-dark);
        }

        .matching-item select {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: white;
            font-family: 'Open Sans', sans-serif;
            min-width: 200px;
            cursor: pointer;
        }

        .matching-item select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* Short Answer */
        .short-answer-input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: 'Open Sans', sans-serif;
            font-size: 16px;
        }

        .short-answer-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(37, 150, 190, 0.2);
        }

        /* Numerical Input */
        .numerical-input-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .numerical-input {
            width: 200px;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: 'Open Sans', sans-serif;
            font-size: 16px;
        }

        /* Essay Textarea */
        .essay-textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: 'Open Sans', sans-serif;
            font-size: 16px;
            min-height: 150px;
            resize: vertical;
        }

        /* Drag and Drop */
        .drag-drop-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .drag-items-container {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            padding: 15px;
            border: 2px dashed var(--border-color);
            border-radius: var(--radius);
            min-height: 80px;
        }

        .drag-item {
            padding: 10px 15px;
            background-color: var(--primary-light);
            border: 1px solid var(--primary-color);
            border-radius: 4px;
            cursor: move;
            user-select: none;
        }

        .drag-item.dragging {
            opacity: 0.5;
        }

        .drag-item.dropped {
            opacity: 0.5;
            text-decoration: line-through;
        }

        .drop-zone {
            padding: 15px;
            border: 2px dashed var(--border-color);
            border-radius: var(--radius);
            min-height: 100px;
            background-color: var(--secondary-color);
        }

        .drop-zone.active {
            border-color: var(--primary-color);
            background-color: rgba(37, 150, 190, 0.05);
        }

        .drop-zone .drop-item {
            display: inline-block;
            padding: 8px 12px;
            margin: 5px;
            background-color: var(--primary-light);
            border: 1px solid var(--primary-color);
            border-radius: 4px;
            cursor: pointer;
        }

        .drop-zone .drop-item:hover {
            background-color: var(--primary-color);
            color: white;
        }

        /* Gapfill Exercise */
        .gapfill-exercise {
            padding: 20px;
            background-color: var(--secondary-color);
            border-radius: var(--radius);
            line-height: 1.8;
        }

        .gap {
            display: inline-block;
            min-width: 100px;
            padding: 5px;
            margin: 0 5px;
            position: relative;
        }

        .gap::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background-color: var(--primary-color);
        }

        .gap input {
            width: 100%;
            border: none;
            background: transparent;
            text-align: center;
            font-family: 'Open Sans', sans-serif;
            font-size: 16px;
        }

        .gap input:focus {
            outline: none;
        }

        /* Ordering Exercise */
        .ordering-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .ordering-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px 15px;
            background-color: var(--secondary-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            cursor: move;
            user-select: none;
            transition: var(--transition);
        }

        .ordering-item.dragging {
            opacity: 0.5;
            border-style: dashed;
        }

        .ordering-item .handle {
            cursor: move;
            color: var(--light-text);
        }

        .ordering-item .item-text {
            flex: 1;
        }

        /* Exercise Types Navigation */
        .exercise-types {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
            padding: 20px;
            background-color: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .type-btn {
            padding: 10px 20px;
            background-color: var(--secondary-color);
            border: 1px solid var(--border-color);
            border-radius: 30px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .type-btn:hover {
            background-color: var(--primary-light);
            border-color: var(--primary-color);
        }

        .type-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Exercise Container */
        .exercise-container {
            background-color: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 40px;
        }

        .exercise-header {
            background-color: var(--primary-color);
            color: white;
            padding: 20px;
        }

        .exercise-header h3 {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .exercise-content {
            padding: 30px;
        }

        /* Explanation */
        .explanation {
            margin-top: 20px;
            padding: 15px;
            background-color: var(--secondary-color);
            border-radius: var(--radius);
            border-left: 4px solid var(--primary-color);
            display: none;
        }

        .explanation.show {
            display: block;
        }

        .explanation h5 {
            color: var(--primary-dark);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Actions */
        .actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            padding: 20px;
            background-color: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .btn-submit, .btn-reset, .btn-show-answers {
            padding: 12px 25px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: var(--transition);
        }

        .btn-submit {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-submit:hover {
            background-color: var(--primary-dark);
        }

        .btn-submit:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-reset {
            background-color: var(--secondary-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        .btn-reset:hover {
            background-color: #e9ecef;
        }

        .btn-show-answers {
            background-color: var(--warning-color);
            color: white;
        }

        .btn-show-answers:hover {
            background-color: #e68900;
        }

        /* Footer */
        footer {
            background-color: #2c3e50;
            color: white;
            padding: 30px 0 20px;
            margin-top: 30px;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 25px;
        }

        .footer-logo h3 {
            font-size: 22px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-logo p {
            margin-bottom: 5px;
            opacity: 0.8;
        }

        .footer-info p, .footer-contact p {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0.8;
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 14px;
            opacity: 0.7;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .two-column-layout {
                flex-direction: column;
                gap: 20px;
            }
            
            .column-resizer {
                width: 100%;
                height: 10px;
                cursor: row-resize;
            }
            
            .column-resizer i {
                transform: rotate(90deg);
            }
            
            .reading-panel, .questions-panel {
                border-radius: var(--radius);
            }
        }

        @media (max-width: 768px) {
            header .container {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .exercise-types {
                overflow-x: auto;
                flex-wrap: nowrap;
                padding: 15px;
            }
            
            .type-btn {
                white-space: nowrap;
            }
            
            .footer-content {
                flex-direction: column;
                gap: 25px;
            }
            
            .actions {
                flex-direction: column;
            }
            
            .true-false-options {
                flex-direction: column;
            }
            
            .matching-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .matching-item select {
                width: 100%;
                min-width: unset;
            }
        }

        @media (max-width: 480px) {
            .panel-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .exercise-content {
                padding: 15px;
            }
            
            .reading-content, .questions-container {
                padding: 15px;
            }
            
            .option {
                padding: 10px;
            }
            
            .drag-items-container {
                flex-direction: column;
            }
            
            .numerical-input-container {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .numerical-input {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="logo">
                <h1><i class="fas fa-globe-americas"></i> Openland</h1>
                <p class="tagline">Open mind, Open world</p>
            </div>
            <div class="exam-info">
                <h2>BÀI TẬP TỔNG HỢP</h2>
                <p>Tiếng Anh 6 - Tất cả dạng bài tập</p>
                <p>Thời gian: Không giới hạn</p>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Exercise Types Navigation -->
        <div class="exercise-types" id="exerciseTypes">
            <button class="type-btn active" data-type="reading">
                <i class="fas fa-book-reader"></i> Đọc hiểu
            </button>
            <button class="type-btn" data-type="multiple-choice">
                <i class="fas fa-list-ul"></i> Multiple choice
            </button>
            <button class="type-btn" data-type="true-false">
                <i class="fas fa-check-circle"></i> True/False
            </button>
            <button class="type-btn" data-type="matching">
                <i class="fas fa-random"></i> Matching
            </button>
            <button class="type-btn" data-type="short-answer">
                <i class="fas fa-pen"></i> Short answer
            </button>
            <button class="type-btn" data-type="numerical">
                <i class="fas fa-calculator"></i> Numerical
            </button>
            <button class="type-btn" data-type="essay">
                <i class="fas fa-file-alt"></i> Essay
            </button>
            <button class="type-btn" data-type="drag-drop">
                <i class="fas fa-hand-point-up"></i> Drag and drop
            </button>
            <button class="type-btn" data-type="gapfill">
                <i class="fas fa-ellipsis-h"></i> Gapfill
            </button>
            <button class="type-btn" data-type="ordering">
                <i class="fas fa-sort-amount-down"></i> Ordering
            </button>
        </div>

        <!-- Reading Exercise (Two Columns) -->
        <div class="exercise-container reading-exercise" id="readingExercise">
            <div class="exercise-header">
                <h3><i class="fas fa-book-open"></i> Bài tập đọc hiểu</h3>
            </div>
            <div class="exercise-content">
                <div class="two-column-layout" id="readingLayout">
                    <!-- Reading Panel -->
                    <div class="reading-panel" id="readingPanel">
                        <div class="panel-header">
                            <h3><i class="fas fa-book"></i> Bài đọc</h3>
                        </div>
                        <div class="reading-content">
                            <h4>Jane's Daily Routine</h4>
                            <p>Jane is a good student. She is eleven years old. She is in grade 6. Every day, she gets up at seven o'clock. After waking up, she washes her face and brushes her teeth. Then, Jane has breakfast with her family. Her father is a teacher. He is forty-two years old. Her mother is a nurse. She is thirty-nine years old. Mike is her older brother. He is in grade 10.</p>
                            <p>Jane goes to school after getting dressed at 7:45 in the morning. It is more than two kilometers from her house to school, so her father takes her to school every day. She studies at Little Star Junior High School. Her school is big and beautiful. The school has three floors, and her classroom is on the second floor. There is also a large playground, a modern gym, a swimming pool, and a library full of interesting books.</p>
                            <p>Jane's favorite place at school is the library, where she can read storybooks and do her homework quietly. After school, Jane usually plays badminton with her friends or attends the music club. She goes home at 5:00 PM and helps her mother prepare dinner. After dinner, she does her homework and watches TV for a while before going to bed at 9:30 PM.</p>
                        </div>
                    </div>

                    <!-- Resizer -->
                    <div class="column-resizer" id="columnResizer">
                        <i class="fas fa-arrows-alt-h"></i>
                    </div>

                    <!-- Questions Panel -->
                    <div class="questions-panel" id="questionsPanel">
                        <div class="panel-header">
                            <h3><i class="fas fa-question-circle"></i> Câu hỏi</h3>
                        </div>
                        <div class="questions-container">
                            <!-- Question 1: Multiple Choice -->
                            <div class="question-block" data-question="1">
                                <div class="question-title">
                                    <span class="q-number-title">Câu 1:</span>
                                    <span class="q-text">How old is Jane?</span>
                                </div>
                                <div class="options">
                                    <div class="option" data-value="A">
                                        <input type="radio" name="reading-q1" id="reading-q1-a" value="A">
                                        <span class="option-label">A.</span>
                                        <span>10 years old</span>
                                    </div>
                                    <div class="option" data-value="B">
                                        <input type="radio" name="reading-q1" id="reading-q1-b" value="B">
                                        <span class="option-label">B.</span>
                                        <span>11 years old</span>
                                    </div>
                                    <div class="option" data-value="C">
                                        <input type="radio" name="reading-q1" id="reading-q1-c" value="C">
                                        <span class="option-label">C.</span>
                                        <span>12 years old</span>
                                    </div>
                                    <div class="option" data-value="D">
                                        <input type="radio" name="reading-q1" id="reading-q1-d" value="D">
                                        <span class="option-label">D.</span>
                                        <span>13 years old</span>
                                    </div>
                                </div>
                                <div class="explanation" id="explanation-reading-q1">
                                    <h5><i class="fas fa-lightbulb"></i> Giải thích</h5>
                                    <p>Trong bài đọc: "She is eleven years old." → Jane 11 tuổi.</p>
                                </div>
                            </div>

                            <!-- Question 2: True/False -->
                            <div class="question-block" data-question="2">
                                <div class="question-title">
                                    <span class="q-number-title">Câu 2:</span>
                                    <span class="q-text">Jane's father is a doctor.</span>
                                </div>
                                <div class="true-false-options">
                                    <div class="true-false-option true" data-value="true">
                                        <i class="fas fa-check"></i> True
                                    </div>
                                    <div class="true-false-option false" data-value="false">
                                        <i class="fas fa-times"></i> False
                                    </div>
                                </div>
                                <div class="explanation" id="explanation-reading-q2">
                                    <h5><i class="fas fa-lightbulb"></i> Giải thích</h5>
                                    <p>Trong bài đọc: "Her father is a teacher." → Bố của Jane là giáo viên, không phải bác sĩ.</p>
                                </div>
                            </div>

                            <!-- Question 3: Short Answer -->
                            <div class="question-block" data-question="3">
                                <div class="question-title">
                                    <span class="q-number-title">Câu 3:</span>
                                    <span class="q-text">What time does Jane go to school?</span>
                                </div>
                                <input type="text" class="short-answer-input" id="reading-q3" placeholder="Nhập câu trả lời của bạn...">
                                <div class="explanation" id="explanation-reading-q3">
                                    <h5><i class="fas fa-lightbulb"></i> Giải thích</h5>
                                    <p>Trong bài đọc: "Jane goes to school after getting dressed at 7:45 in the morning." → Jane đi học sau khi mặc quần áo lúc 7:45 sáng.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Multiple Choice Exercise -->
        <div class="exercise-container multiple-choice-exercise" id="multipleChoiceExercise" style="display: none;">
            <div class="exercise-header">
                <h3><i class="fas fa-list-ul"></i> Multiple Choice</h3>
            </div>
            <div class="exercise-content">
                <!-- Question 1 -->
                <div class="question-block" data-question="1">
                    <div class="question-title">
                        <span class="q-number-title">Câu 1:</span>
                        <span class="q-text">We usually ______ breakfast at 6:30.</span>
                    </div>
                    <div class="options">
                        <div class="option" data-value="A">
                            <input type="radio" name="mc-q1" id="mc-q1-a" value="A">
                            <span class="option-label">A.</span>
                            <span>play</span>
                        </div>
                        <div class="option" data-value="B">
                            <input type="radio" name="mc-q1" id="mc-q1-b" value="B">
                            <span class="option-label">B.</span>
                            <span>do</span>
                        </div>
                        <div class="option" data-value="C">
                            <input type="radio" name="mc-q1" id="mc-q1-c" value="C">
                            <span class="option-label">C.</span>
                            <span>have</span>
                        </div>
                        <div class="option" data-value="D">
                            <input type="radio" name="mc-q1" id="mc-q1-d" value="D">
                            <span class="option-label">D.</span>
                            <span>study</span>
                        </div>
                    </div>
                    <div class="explanation" id="explanation-mc-q1">
                        <h5><i class="fas fa-lightbulb"></i> Giải thích</h5>
                        <p>"have breakfast" = ăn sáng.</p>
                    </div>
                </div>

                <!-- Question 2 -->
                <div class="question-block" data-question="2">
                    <div class="question-title">
                        <span class="q-number-title">Câu 2:</span>
                        <span class="q-text">Clothes are usually keep in a ______.</span>
                    </div>
                    <div class="options">
                        <div class="option" data-value="A">
                            <input type="radio" name="mc-q2" id="mc-q2-a" value="A">
                            <span class="option-label">A.</span>
                            <span>sink</span>
                        </div>
                        <div class="option" data-value="B">
                            <input type="radio" name="mc-q2" id="mc-q2-b" value="B">
                            <span class="option-label">B.</span>
                            <span>wardrobe</span>
                        </div>
                        <div class="option" data-value="C">
                            <input type="radio" name="mc-q2" id="mc-q2-c" value="C">
                            <span class="option-label">C.</span>
                            <span>compass</span>
                        </div>
                        <div class="option" data-value="D">
                            <input type="radio" name="mc-q2" id="mc-q2-d" value="D">
                            <span class="option-label">D.</span>
                            <span>cupboard</span>
                        </div>
                    </div>
                    <div class="explanation" id="explanation-mc-q2">
                        <h5><i class="fas fa-lightbulb"></i> Giải thích</h5>
                        <p>Quần áo thường được để trong tủ quần áo (wardrobe).</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- True/False Exercise -->
        <div class="exercise-container true-false-exercise" id="trueFalseExercise" style="display: none;">
            <div class="exercise-header">
                <h3><i class="fas fa-check-circle"></i> True/False</h3>
            </div>
            <div class="exercise-content">
                <!-- Question 1 -->
                <div class="question-block" data-question="1">
                    <div class="question-title">
                        <span class="q-number-title">Câu 1:</span>
                        <span class="q-text">The cat is hiding under the table.</span>
                    </div>
                    <div class="true-false-options">
                        <div class="true-false-option true" data-value="true">
                            <i class="fas fa-check"></i> True
                        </div>
                        <div class="true-false-option false" data-value="false">
                            <i class="fas fa-times"></i> False
                        </div>
                    </div>
                    <div class="explanation" id="explanation-tf-q1">
                        <h5><i class="fas fa-lightbulb"></i> Giải thích</h5>
                        <p>"under" = bên dưới → Câu này đúng về ngữ pháp và ngữ nghĩa.</p>
                    </div>
                </div>

                <!-- Question 2 -->
                <div class="question-block" data-question="2">
                    <div class="question-title">
                        <span class="q-number-title">Câu 2:</span>
                        <span class="q-text">We always have lunch in the bedroom.</span>
                    </div>
                    <div class="true-false-options">
                        <div class="true-false-option true" data-value="true">
                            <i class="fas fa-check"></i> True
                        </div>
                        <div class="true-false-option false" data-value="false">
                            <i class="fas fa-times"></i> False
                        </div>
                    </div>
                    <div class="explanation" id="explanation-tf-q2">
                        <h5><i class="fas fa-lightbulb"></i> Giải thích</h5>
                        <p>Thông thường chúng ta ăn trưa trong phòng ăn hoặc nhà bếp, không phải phòng ngủ.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Matching Exercise -->
        <div class="exercise-container matching-exercise" id="matchingExercise" style="display: none;">
            <div class="exercise-header">
                <h3><i class="fas fa-random"></i> Matching</h3>
            </div>
            <div class="exercise-content">
                <div class="question-block" data-question="1">
                    <div class="question-title">
                        <span class="q-number-title">Câu 1:</span>
                        <span class="q-text">Nối các từ với nghĩa đúng của chúng:</span>
                    </div>
                    <div class="matching-exercise">
                        <div class="matching-item">
                            <span class="item-label">1.</span>
                            <span>wardrobe</span>
                            <select class="matching-select" id="matching-1">
                                <option value="">Chọn nghĩa phù hợp</option>
                                <option value="A">tủ quần áo</option>
                                <option value="B">bàn học</option>
                                <option value="C">phòng tắm</option>
                                <option value="D">cửa sổ</option>
                            </select>
                        </div>
                        <div class="matching-item">
                            <span class="item-label">2.</span>
                            <span>kitchen</span>
                            <select class="matching-select" id="matching-2">
                                <option value="">Chọn nghĩa phù hợp</option>
                                <option value="A">phòng ngủ</option>
                                <option value="B">phòng khách</option>
                                <option value="C">nhà bếp</option>
                                <option value="D">phòng học</option>
                            </select>
                        </div>
                        <div class="matching-item">
                            <span class="item-label">3.</span>
                            <span>balcony</span>
                            <select class="matching-select" id="matching-3">
                                <option value="">Chọn nghĩa phù hợp</option>
                                <option value="A">cầu thang</option>
                                <option value="B">ban công</option>
                                <option value="C">sân vườn</option>
                                <option value="D">mái nhà</option>
                            </select>
                        </div>
                    </div>
                    <div class="explanation" id="explanation-matching-q1">
                        <h5><i class="fas fa-lightbulb"></i> Giải thích</h5>
                        <p>wardrobe = tủ quần áo, kitchen = nhà bếp, balcony = ban công.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Short Answer Exercise -->
        <div class="exercise-container short-answer-exercise" id="shortAnswerExercise" style="display: none;">
            <div class="exercise-header">
                <h3><i class="fas fa-pen"></i> Short Answer</h3>
            </div>
            <div class="exercise-content">
                <!-- Question 1 -->
                <div class="question-block" data-question="1">
                    <div class="question-title">
                        <span class="q-number-title">Câu 1:</span>
                        <span class="q-text">What is the capital of Vietnam?</span>
                    </div>
                    <input type="text" class="short-answer-input" id="sa-q1" placeholder="Nhập câu trả lời của bạn...">
                    <div class="explanation" id="explanation-sa-q1">
                        <h5><i class="fas fa-lightbulb"></i> Giải thích</h5>
                        <p>Thủ đô của Việt Nam là Hà Nội (Hanoi).</p>
                    </div>
                </div>

                <!-- Question 2 -->
                <div class="question-block" data-question="2">
                    <div class="question-title">
                        <span class="q-number-title">Câu 2:</span>
                        <span class="q-text">What do you call a person who teaches?</span>
                    </div>
                    <input type="text" class="short-answer-input" id="sa-q2" placeholder="Nhập câu trả lời của bạn...">
                    <div class="explanation" id="explanation-sa-q2">
                        <h5><i class="fas fa-lightbulb"></i> Giải thích</h5>
                        <p>Người dạy học được gọi là giáo viên (teacher).</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Numerical Exercise -->
        <div class="exercise-container numerical-exercise" id="numericalExercise" style="display: none;">
            <div class="exercise-header">
                <h3><i class="fas fa-calculator"></i> Numerical</h3>
            </div>
            <div class="exercise-content">
                <!-- Question 1 -->
                <div class="question-block" data-question="1">
                    <div class="question-title">
                        <span class="q-number-title">Câu 1:</span>
                        <span class="q-text">What is 15 + 27?</span>
                    </div>
                    <div class="numerical-input-container">
                        <input type="number" class="numerical-input" id="num-q1" placeholder="Nhập số">
                        <span>= 42</span>
                    </div>
                    <div class="explanation" id="explanation-num-q1">
                        <h5><i class="fas fa-lightbulb"></i> Giải thích</h5>
                        <p>15 + 27 = 42</p>
                    </div>
                </div>

                <!-- Question 2 -->
                <div class="question-block" data-question="2">
                    <div class="question-title">
                        <span class="q-number-title">Câu 2:</span>
                        <span class="q-text">If a book costs $12 and you buy 3 books, how much do you pay?</span>
                    </div>
                    <div class="numerical-input-container">
                        <input type="number" class="numerical-input" id="num-q2" placeholder="Nhập số">
                        <span>dollars</span>
                    </div>
                    <div class="explanation" id="explanation-num-q2">
                        <h5><i class="fas fa-lightbulb"></i> Giải thích</h5>
                        <p>12 × 3 = 36 dollars</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Essay Exercise -->
        <div class="exercise-container essay-exercise" id="essayExercise" style="display: none;">
            <div class="exercise-header">
                <h3><i class="fas fa-file-alt"></i> Essay</h3>
            </div>
            <div class="exercise-content">
                <!-- Question 1 -->
                <div class="question-block" data-question="1">
                    <div class="question-title">
                        <span class="q-number-title">Câu 1:</span>
                        <span class="q-text">Describe your daily routine. What do you do from morning to night?</span>
                    </div>
                    <textarea class="essay-textarea" id="essay-q1" placeholder="Viết bài luận của bạn ở đây..."></textarea>
                    <div class="explanation" id="explanation-essay-q1">
                        <h5><i class="fas fa-lightbulb"></i> Hướng dẫn</h5>
                        <p>Mô tả thói quen hàng ngày của bạn: thức dậy lúc mấy giờ, ăn sáng, đi học, hoạt động sau giờ học, thời gian nghỉ ngơi, v.v.</p>
                    </div>
                </div>

                <!-- Question 2 -->
                <div class="question-block" data-question="2">
                    <div class="question-title">
                        <span class="q-number-title">Câu 2:</span>
                        <span class="q-text">What is your favorite subject in school and why?</span>
                    </div>
                    <textarea class="essay-textarea" id="essay-q2" placeholder="Viết bài luận của bạn ở đây..."></textarea>
                    <div class="explanation" id="explanation-essay-q2">
                        <h5><i class="fas fa-lightbulb"></i> Hướng dẫn</h5>
                        <p>Giải thích môn học yêu thích của bạn và lý do tại sao bạn thích nó (giáo viên thú vị, nội dung hấp dẫn, dễ hiểu, v.v.).</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Drag and Drop Exercise -->
        <div class="exercise-container drag-drop-exercise" id="dragDropExercise" style="display: none;">
            <div class="exercise-header">
                <h3><i class="fas fa-hand-point-up"></i> Drag and Drop</h3>
            </div>
            <div class="exercise-content">
                <!-- Question 1 -->
                <div class="question-block" data-question="1">
                    <div class="question-title">
                        <span class="q-number-title">Câu 1:</span>
                        <span class="q-text">Kéo các từ vào đúng vị trí trong câu:</span>
                    </div>
                    <div class="drag-drop-container">
                        <p>Sắp xếp các từ sau thành câu hoàn chỉnh:</p>
                        <div class="drag-items-container" id="dragItems">
                            <div class="drag-item" data-word="I" draggable="true">I</div>
                            <div class="drag-item" data-word="play" draggable="true">play</div>
                            <div class="drag-item" data-word="football" draggable="true">football</div>
                            <div class="drag-item" data-word="every" draggable="true">every</div>
                            <div class="drag-item" data-word="Sunday" draggable="true">Sunday</div>
                        </div>
                        <p>Thả từ vào đây:</p>
                        <div class="drop-zone" id="dropZone">
                            <!-- Dropped items will appear here -->
                        </div>
                    </div>
                    <div class="explanation" id="explanation-drag-q1">
                        <h5><i class="fas fa-lightbulb"></i> Giải thích</h5>
                        <p>Câu đúng: "I play football every Sunday." (Tôi chơi bóng đá mỗi Chủ nhật.)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gapfill Exercise -->
        <div class="exercise-container gapfill-exercise" id="gapfillExercise" style="display: none;">
            <div class="exercise-header">
                <h3><i class="fas fa-ellipsis-h"></i> Gapfill</h3>
            </div>
            <div class="exercise-content">
                <!-- Question 1 -->
                <div class="question-block" data-question="1">
                    <div class="question-title">
                        <span class="q-number-title">Câu 1:</span>
                        <span class="q-text">Điền từ thích hợp vào chỗ trống:</span>
                    </div>
                    <div class="gapfill-exercise">
                        <p>
                            My name <span class="gap"><input type="text" maxlength="2" id="gap-1"></span> Jane. 
                            I <span class="gap"><input type="text" maxlength="3" id="gap-2"></span> twelve years old. 
                            I live <span class="gap"><input type="text" maxlength="4" id="gap-3"></span> Hanoi 
                            with my family. My father <span class="gap"><input type="text" maxlength="2" id="gap-4"></span> a teacher.
                        </p>
                    </div>
                    <div class="explanation" id="explanation-gapfill-q1">
                        <h5><i class="fas fa-lightbulb"></i> Giải thích</h5>
                        <p>Đáp án: is, am, in, is → "My name is Jane. I am twelve years old. I live in Hanoi with my family. My father is a teacher."</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ordering Exercise -->
        <div class="exercise-container ordering-exercise" id="orderingExercise" style="display: none;">
            <div class="exercise-header">
                <h3><i class="fas fa-sort-amount-down"></i> Ordering</h3>
            </div>
            <div class="exercise-content">
                <!-- Question 1 -->
                <div class="question-block" data-question="1">
                    <div class="question-title">
                        <span class="q-number-title">Câu 1:</span>
                        <span class="q-text">Sắp xếp các bước đánh răng đúng thứ tự:</span>
                    </div>
                    <div class="ordering-container" id="orderingContainer">
                        <div class="ordering-item" data-order="3" draggable="true">
                            <span class="handle"><i class="fas fa-arrows-alt-v"></i></span>
                            <span class="item-text">Súc miệng với nước</span>
                        </div>
                        <div class="ordering-item" data-order="1" draggable="true">
                            <span class="handle"><i class="fas fa-arrows-alt-v"></i></span>
                            <span class="item-text">Lấy kem đánh răng</span>
                        </div>
                        <div class="ordering-item" data-order="4" draggable="true">
                            <span class="handle"><i class="fas fa-arrows-alt-v"></i></span>
                            <span class="item-text">Rửa sạch bàn chải</span>
                        </div>
                        <div class="ordering-item" data-order="2" draggable="true">
                            <span class="handle"><i class="fas fa-arrows-alt-v"></i></span>
                            <span class="item-text">Chải răng trong 2 phút</span>
                        </div>
                    </div>
                    <div class="explanation" id="explanation-ordering-q1">
                        <h5><i class="fas fa-lightbulb"></i> Giải thích</h5>
                        <p>Thứ tự đúng: 1. Lấy kem đánh răng → 2. Chải răng trong 2 phút → 3. Súc miệng với nước → 4. Rửa sạch bàn chải.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Actions -->
        <div class="actions">
            <button class="btn-submit" id="submitBtn">
                <i class="fas fa-paper-plane"></i> Nộp bài
            </button>
            <button class="btn-reset" id="resetBtn">
                <i class="fas fa-redo"></i> Làm lại
            </button>
            <button class="btn-show-answers" id="showAnswersBtn">
                <i class="fas fa-eye"></i> Hiện đáp án
            </button>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <h3><i class="fas fa-globe-americas"></i> Openland</h3>
                    <p>Open mind, Open world</p>
                    <p>Học tập - Khám phá - Phát triển</p>
                </div>
                <div class="footer-info">
                    <p><i class="fas fa-graduation-cap"></i> Bài tập tổng hợp Tiếng Anh 6</p>
                    <p><i class="fas fa-calendar-alt"></i> Năm học 2025-2026</p>
                    <p><i class="fas fa-user-check"></i> Học sinh tự luyện tập</p>
                </div>
                <div class="footer-contact">
                    <p><i class="fas fa-info-circle"></i> Đây là trang web thử nghiệm</p>
                    <p><i class="fas fa-lightbulb"></i> Chúc các bạn học tập hiệu quả!</p>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 Openland - Open mind, Open world. Tất cả các đề thi thuộc bản quyền của thuvienhoclieu.com</p>
            </div>
        </div>
    </footer>

    <script>
        // Biến toàn cục
        let currentExercise = 'reading';
        let examSubmitted = false;
        let isResizing = false;
        let startX, startWidth, startQuestionsWidth;
        let readingPanel, questionsPanel, columnResizer;

        // Khởi tạo trang
        document.addEventListener('DOMContentLoaded', function() {
            initComponents();
            initEventListeners();
            initDragAndDrop();
            initOrdering();
            initReadingLayoutResizer();
        });

        // Khởi tạo components
        function initComponents() {
            readingPanel = document.getElementById('readingPanel');
            questionsPanel = document.getElementById('questionsPanel');
            columnResizer = document.getElementById('columnResizer');
        }

        // Khởi tạo event listeners
        function initEventListeners() {
            // Navigation buttons
            const typeButtons = document.querySelectorAll('.type-btn');
            typeButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const type = this.getAttribute('data-type');
                    switchExercise(type);
                    
                    // Update active button
                    typeButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // Option selection - FIXED: Sử dụng event delegation
            document.addEventListener('change', function(e) {
                if (e.target.type === 'radio') {
                    const option = e.target.closest('.option');
                    if (option) {
                        const questionBlock = option.closest('.question-block');
                        
                        // Remove selected from other options in the same question
                        questionBlock.querySelectorAll('.option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        
                        // Add selected to current option
                        option.classList.add('selected');
                    }
                }
            });

            // Option click handler - FIXED: Thêm xử lý click trực tiếp
            document.addEventListener('click', function(e) {
                const option = e.target.closest('.option');
                if (option && !e.target.type) {
                    const radioInput = option.querySelector('input[type="radio"]');
                    if (radioInput) {
                        radioInput.checked = true;
                        const questionBlock = option.closest('.question-block');
                        
                        // Remove selected from other options
                        questionBlock.querySelectorAll('.option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        
                        // Add selected to current option
                        option.classList.add('selected');
                    }
                }
            });

            // True/False selection - FIXED: Sử dụng event delegation
            document.addEventListener('click', function(e) {
                const tfOption = e.target.closest('.true-false-option');
                if (tfOption && !examSubmitted) {
                    const questionBlock = tfOption.closest('.question-block');
                    
                    // Remove selected from other options
                    questionBlock.querySelectorAll('.true-false-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Add selected to current option
                    tfOption.classList.add('selected');
                }
            });

            // Select change handler
            document.addEventListener('change', function(e) {
                if (e.target.classList.contains('matching-select')) {
                    // Xử lý khi chọn option trong matching
                    console.log('Selected:', e.target.value);
                }
            });

            // Input change handlers
            document.addEventListener('input', function(e) {
                if (e.target.classList.contains('short-answer-input') ||
                    e.target.classList.contains('numerical-input') ||
                    e.target.classList.contains('essay-textarea') ||
                    e.target.classList.contains('gapfill-exercise')?.contains(e.target)) {
                    // Xử lý khi nhập nội dung
                }
            });

            // Submit button
            document.getElementById('submitBtn').addEventListener('click', submitExam);
            
            // Reset button
            document.getElementById('resetBtn').addEventListener('click', resetExam);
            
            // Show answers button
            document.getElementById('showAnswersBtn').addEventListener('click', showAnswers);
        }

        // Chuyển đổi giữa các dạng bài tập
        function switchExercise(type) {
            currentExercise = type;
            
            // Ẩn tất cả bài tập
            document.querySelectorAll('.exercise-container').forEach(exercise => {
                exercise.style.display = 'none';
            });
            
            // Hiện bài tập được chọn
            const targetExercise = document.getElementById(type + 'Exercise');
            if (targetExercise) {
                targetExercise.style.display = 'block';
            }
        }

        // Khởi tạo drag and drop
        function initDragAndDrop() {
            const dragItems = document.querySelectorAll('.drag-item');
            const dropZone = document.getElementById('dropZone');

            dragItems.forEach(item => {
                item.addEventListener('dragstart', function(e) {
                    this.classList.add('dragging');
                    e.dataTransfer.setData('text/plain', this.getAttribute('data-word'));
                    e.dataTransfer.effectAllowed = 'move';
                });

                item.addEventListener('dragend', function() {
                    this.classList.remove('dragging');
                });
            });

            dropZone.addEventListener('dragover', function(e) {
                e.preventDefault();
                e.dataTransfer.dropEffect = 'move';
                this.classList.add('active');
            });

            dropZone.addEventListener('dragleave', function() {
                this.classList.remove('active');
            });

            dropZone.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('active');
                
                const word = e.dataTransfer.getData('text/plain');
                const dragItems = document.querySelectorAll('.drag-item');
                let dragItem = null;
                
                // Tìm item chưa được dropped
                for (let item of dragItems) {
                    if (item.getAttribute('data-word') === word && !item.classList.contains('dropped')) {
                        dragItem = item;
                        break;
                    }
                }
                
                if (dragItem) {
                    // Create a new element in drop zone
                    const dropItem = document.createElement('span');
                    dropItem.className = 'drop-item';
                    dropItem.textContent = word;
                    dropItem.setAttribute('data-word', word);
                    
                    // Add remove functionality
                    dropItem.addEventListener('click', function() {
                        const word = this.getAttribute('data-word');
                        const originalItems = document.querySelectorAll(`.drag-item[data-word="${word}"]`);
                        originalItems.forEach(item => {
                            if (item.classList.contains('dropped')) {
                                item.classList.remove('dropped');
                            }
                        });
                        this.remove();
                    });
                    
                    this.appendChild(dropItem);
                    
                    // Mark original as dropped
                    dragItem.classList.add('dropped');
                }
            });
        }

        // Khởi tạo ordering exercise
        function initOrdering() {
            const container = document.getElementById('orderingContainer');
            let draggedItem = null;

            container.querySelectorAll('.ordering-item').forEach(item => {
                item.addEventListener('dragstart', function(e) {
                    draggedItem = this;
                    this.classList.add('dragging');
                    e.dataTransfer.effectAllowed = 'move';
                    e.dataTransfer.setData('text/plain', this.getAttribute('data-order'));
                });

                item.addEventListener('dragend', function() {
                    this.classList.remove('dragging');
                    draggedItem = null;
                });

                item.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    e.dataTransfer.dropEffect = 'move';
                });

                item.addEventListener('dragenter', function(e) {
                    e.preventDefault();
                    if (this !== draggedItem) {
                        const rect = this.getBoundingClientRect();
                        const midpoint = rect.top + rect.height / 2;
                        
                        if (e.clientY > midpoint) {
                            container.insertBefore(draggedItem, this.nextSibling);
                        } else {
                            container.insertBefore(draggedItem, this);
                        }
                    }
                });
            });
        }

        // Khởi tạo resizer cho reading layout - FIXED
        function initReadingLayoutResizer() {
            if (!columnResizer || !readingPanel || !questionsPanel) return;
            
            columnResizer.addEventListener('mousedown', startResize);
            columnResizer.addEventListener('touchstart', startResizeTouch);
            
            function startResize(e) {
                e.preventDefault();
                isResizing = true;
                startX = e.clientX;
                startWidth = readingPanel.offsetWidth;
                startQuestionsWidth = questionsPanel.offsetWidth;
                
                document.addEventListener('mousemove', handleMouseMove);
                document.addEventListener('mouseup', stopResize);
                
                // Add resize cursor
                document.body.style.cursor = 'col-resize';
                document.body.style.userSelect = 'none';
            }
            
            function startResizeTouch(e) {
                e.preventDefault();
                isResizing = true;
                startX = e.touches[0].clientX;
                startWidth = readingPanel.offsetWidth;
                startQuestionsWidth = questionsPanel.offsetWidth;
                
                document.addEventListener('touchmove', handleTouchMove);
                document.addEventListener('touchend', stopResize);
            }

            function handleMouseMove(e) {
                if (!isResizing) return;
                
                const deltaX = e.clientX - startX;
                const newWidth = startWidth + deltaX;
                const containerWidth = readingPanel.parentElement.offsetWidth;
                const resizerWidth = columnResizer.offsetWidth;
                
                // Limit min and max width (200px min each panel)
                const minWidth = 200;
                const maxWidth = containerWidth - minWidth - resizerWidth;
                
                if (newWidth >= minWidth && newWidth <= maxWidth) {
                    readingPanel.style.width = newWidth + 'px';
                    readingPanel.style.flex = 'none';
                    
                    questionsPanel.style.width = (containerWidth - newWidth - resizerWidth) + 'px';
                    questionsPanel.style.flex = 'none';
                }
            }
            
            function handleTouchMove(e) {
                if (!isResizing || !e.touches[0]) return;
                
                const deltaX = e.touches[0].clientX - startX;
                const newWidth = startWidth + deltaX;
                const containerWidth = readingPanel.parentElement.offsetWidth;
                const resizerWidth = columnResizer.offsetWidth;
                
                // Limit min and max width (200px min each panel)
                const minWidth = 200;
                const maxWidth = containerWidth - minWidth - resizerWidth;
                
                if (newWidth >= minWidth && newWidth <= maxWidth) {
                    readingPanel.style.width = newWidth + 'px';
                    readingPanel.style.flex = 'none';
                    
                    questionsPanel.style.width = (containerWidth - newWidth - resizerWidth) + 'px';
                    questionsPanel.style.flex = 'none';
                }
            }

            function stopResize() {
                isResizing = false;
                document.removeEventListener('mousemove', handleMouseMove);
                document.removeEventListener('mouseup', stopResize);
                document.removeEventListener('touchmove', handleTouchMove);
                document.removeEventListener('touchend', stopResize);
                
                // Reset cursor
                document.body.style.cursor = '';
                document.body.style.userSelect = '';
            }
        }

        // Nộp bài
        function submitExam() {
            if (examSubmitted) {
                alert('Bài tập đã được nộp!');
                return;
            }
            
            if (!confirm('Bạn có chắc chắn muốn nộp bài?')) {
                return;
            }
            
            examSubmitted = true;
            
            // Hiển thị giải thích cho tất cả câu hỏi
            document.querySelectorAll('.explanation').forEach(explanation => {
                explanation.classList.add('show');
            });
            
            // Đánh dấu đáp án đúng/sai
            evaluateAnswers();
            
            // Disable tất cả input
            document.querySelectorAll('input, select, textarea').forEach(input => {
                input.disabled = true;
            });
            
            // Vô hiệu hóa drag and drop
            document.querySelectorAll('.drag-item, .ordering-item').forEach(item => {
                item.setAttribute('draggable', false);
                item.style.cursor = 'default';
            });
            
            // Vô hiệu hóa true/false options
            document.querySelectorAll('.true-false-option').forEach(option => {
                option.style.cursor = 'default';
                option.onclick = null;
            });
            
            // Vô hiệu hóa column resizer
            columnResizer.style.cursor = 'default';
            columnResizer.onmousedown = null;
            columnResizer.ontouchstart = null;
            
            // Đổi text nút
            document.getElementById('submitBtn').innerHTML = '<i class="fas fa-check"></i> Đã nộp';
            document.getElementById('submitBtn').disabled = true;
            
            alert('Bạn đã nộp bài thành công! Kết quả đã được hiển thị.');
        }

        // Đánh giá đáp án - FIXED: Xử lý tất cả dạng câu hỏi
        function evaluateAnswers() {
            // Reading Exercise
            // Q1: Multiple choice
            const readingQ1 = document.querySelector('input[name="reading-q1"]:checked');
            if (readingQ1) {
                const option = readingQ1.closest('.option');
                if (readingQ1.value === 'B') {
                    option.classList.add('correct');
                } else {
                    option.classList.add('incorrect');
                }
            }
            
            // Q2: True/False
            const readingQ2Option = document.querySelector('.reading-exercise .true-false-option.selected');
            if (readingQ2Option && readingQ2Option.classList.contains('false')) {
                readingQ2Option.classList.add('correct');
            } else if (readingQ2Option) {
                readingQ2Option.classList.add('incorrect');
            }
            
            // Q3: Short answer
            const readingQ3Input = document.getElementById('reading-q3');
            if (readingQ3Input) {
                const answer = readingQ3Input.value.trim().toLowerCase();
                if (answer === '7:45' || answer === '7.45' || answer === 'seven forty-five') {
                    readingQ3Input.style.borderColor = 'var(--correct-color)';
                    readingQ3Input.style.backgroundColor = 'rgba(76, 175, 80, 0.1)';
                } else if (answer) {
                    readingQ3Input.style.borderColor = 'var(--incorrect-color)';
                    readingQ3Input.style.backgroundColor = 'rgba(244, 67, 54, 0.1)';
                }
            }
            
            // Multiple Choice Exercise
            // Q1
            const mcQ1 = document.querySelector('input[name="mc-q1"]:checked');
            if (mcQ1) {
                const option = mcQ1.closest('.option');
                if (mcQ1.value === 'C') {
                    option.classList.add('correct');
                } else {
                    option.classList.add('incorrect');
                }
            }
            
            // Q2
            const mcQ2 = document.querySelector('input[name="mc-q2"]:checked');
            if (mcQ2) {
                const option = mcQ2.closest('.option');
                if (mcQ2.value === 'B') {
                    option.classList.add('correct');
                } else {
                    option.classList.add('incorrect');
                }
            }
            
            // True/False Exercise
            // Q1
            const tfQ1Option = document.querySelector('.true-false-exercise .question-block[data-question="1"] .true-false-option.selected');
            if (tfQ1Option && tfQ1Option.classList.contains('true')) {
                tfQ1Option.classList.add('correct');
            } else if (tfQ1Option) {
                tfQ1Option.classList.add('incorrect');
            }
            
            // Q2
            const tfQ2Option = document.querySelector('.true-false-exercise .question-block[data-question="2"] .true-false-option.selected');
            if (tfQ2Option && tfQ2Option.classList.contains('false')) {
                tfQ2Option.classList.add('correct');
            } else if (tfQ2Option) {
                tfQ2Option.classList.add('incorrect');
            }
            
            // Matching Exercise
            const matching1 = document.getElementById('matching-1');
            const matching2 = document.getElementById('matching-2');
            const matching3 = document.getElementById('matching-3');
            
            if (matching1 && matching1.value === 'A') matching1.style.borderColor = 'var(--correct-color)';
            else if (matching1 && matching1.value) matching1.style.borderColor = 'var(--incorrect-color)';
            
            if (matching2 && matching2.value === 'C') matching2.style.borderColor = 'var(--correct-color)';
            else if (matching2 && matching2.value) matching2.style.borderColor = 'var(--incorrect-color)';
            
            if (matching3 && matching3.value === 'B') matching3.style.borderColor = 'var(--correct-color)';
            else if (matching3 && matching3.value) matching3.style.borderColor = 'var(--incorrect-color)';
            
            // Short Answer
            const saQ1 = document.getElementById('sa-q1');
            const saQ2 = document.getElementById('sa-q2');
            
            if (saQ1) {
                const answer = saQ1.value.trim().toLowerCase();
                if (answer === 'hanoi' || answer === 'ha noi') {
                    saQ1.style.borderColor = 'var(--correct-color)';
                    saQ1.style.backgroundColor = 'rgba(76, 175, 80, 0.1)';
                } else if (answer) {
                    saQ1.style.borderColor = 'var(--incorrect-color)';
                    saQ1.style.backgroundColor = 'rgba(244, 67, 54, 0.1)';
                }
            }
            
            if (saQ2) {
                const answer = saQ2.value.trim().toLowerCase();
                if (answer === 'teacher') {
                    saQ2.style.borderColor = 'var(--correct-color)';
                    saQ2.style.backgroundColor = 'rgba(76, 175, 80, 0.1)';
                } else if (answer) {
                    saQ2.style.borderColor = 'var(--incorrect-color)';
                    saQ2.style.backgroundColor = 'rgba(244, 67, 54, 0.1)';
                }
            }
            
            // Numerical
            const numQ1 = document.getElementById('num-q1');
            const numQ2 = document.getElementById('num-q2');
            
            if (numQ1 && parseInt(numQ1.value) === 42) {
                numQ1.style.borderColor = 'var(--correct-color)';
                numQ1.style.backgroundColor = 'rgba(76, 175, 80, 0.1)';
            } else if (numQ1 && numQ1.value) {
                numQ1.style.borderColor = 'var(--incorrect-color)';
                numQ1.style.backgroundColor = 'rgba(244, 67, 54, 0.1)';
            }
            
            if (numQ2 && parseInt(numQ2.value) === 36) {
                numQ2.style.borderColor = 'var(--correct-color)';
                numQ2.style.backgroundColor = 'rgba(76, 175, 80, 0.1)';
            } else if (numQ2 && numQ2.value) {
                numQ2.style.borderColor = 'var(--incorrect-color)';
                numQ2.style.backgroundColor = 'rgba(244, 67, 54, 0.1)';
            }
            
            // Gapfill
            const gap1 = document.getElementById('gap-1');
            const gap2 = document.getElementById('gap-2');
            const gap3 = document.getElementById('gap-3');
            const gap4 = document.getElementById('gap-4');
            
            if (gap1 && gap1.value.toLowerCase() === 'is') {
                gap1.style.color = 'var(--correct-color)';
            } else if (gap1 && gap1.value) {
                gap1.style.color = 'var(--incorrect-color)';
            }
            
            if (gap2 && gap2.value.toLowerCase() === 'am') {
                gap2.style.color = 'var(--correct-color)';
            } else if (gap2 && gap2.value) {
                gap2.style.color = 'var(--incorrect-color)';
            }
            
            if (gap3 && gap3.value.toLowerCase() === 'in') {
                gap3.style.color = 'var(--correct-color)';
            } else if (gap3 && gap3.value) {
                gap3.style.color = 'var(--incorrect-color)';
            }
            
            if (gap4 && gap4.value.toLowerCase() === 'is') {
                gap4.style.color = 'var(--correct-color)';
            } else if (gap4 && gap4.value) {
                gap4.style.color = 'var(--incorrect-color)';
            }
        }

        // Làm lại bài
        function resetExam() {
            if (!confirm('Bạn có chắc chắn muốn làm lại tất cả bài tập? Tất cả câu trả lời sẽ bị xóa.')) {
                return;
            }
            
            examSubmitted = false;
            
            // Reset tất cả input
            document.querySelectorAll('input, select, textarea').forEach(input => {
                input.disabled = false;
                input.style.borderColor = '';
                input.style.backgroundColor = '';
                input.style.color = '';
                
                if (input.type === 'radio' || input.type === 'checkbox') {
                    input.checked = false;
                } else {
                    input.value = '';
                }
            });
            
            // Reset options
            document.querySelectorAll('.option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            // Reset true/false
            document.querySelectorAll('.true-false-option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
                option.style.cursor = 'pointer';
            });
            
            // Reset drag and drop
            document.querySelectorAll('.drag-item').forEach(item => {
                item.classList.remove('dropped', 'dragging');
                item.style.opacity = '1';
                item.setAttribute('draggable', true);
                item.style.cursor = 'move';
            });
            
            document.getElementById('dropZone').innerHTML = '';
            
            // Reset ordering
            const orderingContainer = document.getElementById('orderingContainer');
            const items = Array.from(orderingContainer.querySelectorAll('.ordering-item'));
            items.sort((a, b) => parseInt(a.getAttribute('data-order')) - parseInt(b.getAttribute('data-order')));
            orderingContainer.innerHTML = '';
            items.forEach(item => {
                item.classList.remove('dragging');
                item.setAttribute('draggable', true);
                item.style.cursor = 'move';
                orderingContainer.appendChild(item);
            });
            
            // Kích hoạt lại column resizer
            columnResizer.style.cursor = 'col-resize';
            initReadingLayoutResizer();
            
            // Reinitialize drag and drop and ordering
            initDragAndDrop();
            initOrdering();
            
            // Ẩn giải thích
            document.querySelectorAll('.explanation').forEach(explanation => {
                explanation.classList.remove('show');
            });
            
            // Reset nút nộp bài
            document.getElementById('submitBtn').innerHTML = '<i class="fas fa-paper-plane"></i> Nộp bài';
            document.getElementById('submitBtn').disabled = false;
        }

        // Hiện đáp án
        function showAnswers() {
            // Hiển thị tất cả giải thích
            document.querySelectorAll('.explanation').forEach(explanation => {
                explanation.classList.add('show');
            });
            
            // Điền đáp án đúng cho tất cả câu hỏi
            // Reading Q1
            document.getElementById('reading-q1-b').checked = true;
            document.getElementById('reading-q1-b').closest('.option').classList.add('selected', 'correct');
            
            // Reading Q2
            const readingQ2False = document.querySelector('.reading-exercise .true-false-option.false');
            readingQ2False.classList.add('selected', 'correct');
            
            // Reading Q3
            const readingQ3Input = document.getElementById('reading-q3');
            if (readingQ3Input) readingQ3Input.value = '7:45';
            
            // Multiple Choice Q1
            document.getElementById('mc-q1-c').checked = true;
            document.getElementById('mc-q1-c').closest('.option').classList.add('selected', 'correct');
            
            // Multiple Choice Q2
            document.getElementById('mc-q2-b').checked = true;
            document.getElementById('mc-q2-b').closest('.option').classList.add('selected', 'correct');
            
            // True/False Q1
            const tfQ1True = document.querySelector('.true-false-exercise .question-block[data-question="1"] .true-false-option.true');
            if (tfQ1True) tfQ1True.classList.add('selected', 'correct');
            
            // True/False Q2
            const tfQ2False = document.querySelector('.true-false-exercise .question-block[data-question="2"] .true-false-option.false');
            if (tfQ2False) tfQ2False.classList.add('selected', 'correct');
            
            // Matching
            const matching1 = document.getElementById('matching-1');
            const matching2 = document.getElementById('matching-2');
            const matching3 = document.getElementById('matching-3');
            
            if (matching1) matching1.value = 'A';
            if (matching2) matching2.value = 'C';
            if (matching3) matching3.value = 'B';
            
            // Short Answer
            const saQ1 = document.getElementById('sa-q1');
            const saQ2 = document.getElementById('sa-q2');
            
            if (saQ1) saQ1.value = 'Hanoi';
            if (saQ2) saQ2.value = 'teacher';
            
            // Numerical
            const numQ1 = document.getElementById('num-q1');
            const numQ2 = document.getElementById('num-q2');
            
            if (numQ1) numQ1.value = '42';
            if (numQ2) numQ2.value = '36';
            
            // Gapfill
            const gap1 = document.getElementById('gap-1');
            const gap2 = document.getElementById('gap-2');
            const gap3 = document.getElementById('gap-3');
            const gap4 = document.getElementById('gap-4');
            
            if (gap1) gap1.value = 'is';
            if (gap2) gap2.value = 'am';
            if (gap3) gap3.value = 'in';
            if (gap4) gap4.value = 'is';
            
            // Drag and Drop - tạo câu hoàn chỉnh
            const dropZone = document.getElementById('dropZone');
            dropZone.innerHTML = '';
            ['I', 'play', 'football', 'every', 'Sunday'].forEach(word => {
                const span = document.createElement('span');
                span.className = 'drop-item';
                span.textContent = word;
                span.setAttribute('data-word', word);
                dropZone.appendChild(span);
            });
            
            // Ordering - sắp xếp đúng thứ tự
            const orderingContainer = document.getElementById('orderingContainer');
            const items = [
                {order: 1, text: 'Lấy kem đánh răng'},
                {order: 2, text: 'Chải răng trong 2 phút'},
                {order: 3, text: 'Súc miệng với nước'},
                {order: 4, text: 'Rửa sạch bàn chải'}
            ];
            
            orderingContainer.innerHTML = '';
            items.forEach(itemData => {
                const item = document.createElement('div');
                item.className = 'ordering-item';
                item.setAttribute('data-order', itemData.order);
                item.setAttribute('draggable', 'true');
                item.innerHTML = `
                    <span class="handle"><i class="fas fa-arrows-alt-v"></i></span>
                    <span class="item-text">${itemData.text}</span>
                `;
                orderingContainer.appendChild(item);
            });
            
            // Reinitialize ordering
            initOrdering();
            
            alert('Đã hiển thị tất cả đáp án đúng!');
        }
    </script>
</body>
</html>
